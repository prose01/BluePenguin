<div *ngIf="!auth.isAuthenticated()">
  <button *ngIf="!auth.isAuthenticated()" mat-flat-button color="accent" (click)="auth.login()">
    {{'LogIn'| transloco}}
  </button>

  <h3>
    {{'NotLoggedIn'| transloco}}
  </h3>
</div>

<div *ngIf="auth.isAuthenticated()">

  <div id="navbar" [class.mobile]="mobileQuery.matches">
    <h2 (click)="loadDashboard()">{{title}}</h2>

    <div *ngIf="isProfileCreated">
      <!--Navigation buttons-->
      <div *ngIf="pageView === 'Dashboard' || pageView === 'Search'" class="menu-buttons">
        <button mat-flat-button color="primary" (click)="sidenav.toggle(); toggleDisplay();" attr.aria-label="{{matButtonToggleText}}" matTooltip={{matButtonToggleText}}>
          <span class="material-icons">{{matButtonToggleIcon}}</span>
        </button>
      </div>

      <!--ViewToggle button-->
      <div *ngIf="pageView === 'Dashboard'" class="menu-buttons">
        <button mat-flat-button color="primary" (click)="toggleViewDisplay()" attr.aria-label="{{matButtonViewToggleText}}" matTooltip={{matButtonViewToggleText}}>
          <span class="material-icons">{{matButtonViewToggleIcon}}</span>
        </button>
      </div>

      <!--Dashboard menu-->
      <div *ngIf="pageView === 'Dashboard'" class="menu-buttons">
        <button mat-flat-button color="primary" (click)="getData('LatestProfiles');" attr.aria-label="{{'All'| transloco}}" matTooltip="{{'All'| transloco}}">
          {{'All'| transloco}}
        </button>

        <button mat-flat-button color="primary" (click)="getData('FilterProfiles');" attr.aria-label="{{'MySearchFilter'| transloco}}" matTooltip="{{'MySearchFilter'| transloco}}">
          <span class="material-icons">tune</span>
        </button>

        <button mat-flat-button color="primary" (click)="getData('BookmarkedProfiles');" attr.aria-label="{{'Bookmarks'| transloco}}" matTooltip="{{'Bookmarks'| transloco}}">
          <span class="material-icons">bookmarks</span>
        </button>

        <button mat-flat-button color="primary" (click)="getData('ProfilesWhoVisitedMe');" attr.aria-label="{{'VisitedMe'| transloco}}" matTooltip="{{'VisitedMe'| transloco}}">
          <span class="material-icons">adjust</span>
        </button>

        <button mat-flat-button color="primary" (click)="getData('ProfilesWhoBookmarkedMe');" attr.aria-label="{{'BookmarkedMe'| transloco}}" matTooltip="{{'BookmarkedMe'| transloco}}">
          <span class="material-icons">bookmark_added</span>
        </button>

        <button mat-flat-button color="primary" (click)="getData('ProfilesWhoLikesMe');" attr.aria-label="{{'LikesMe'| transloco}}" matTooltip="{{'LikesMe'| transloco}}">
          <span class="material-icons">favorite</span>
        </button>

        <button mat-flat-button color="primary" (click)="toggleOrderBy()" attr.aria-label="{{matButtonOrderByText}}" matTooltip={{matButtonOrderByText}}>
          <span class="material-icons">{{matButtonOrderByIcon}}</span>
        </button>

        <button mat-flat-button color="primary" (click)="loadGroups()" attr.aria-label="{{'Groups'| transloco}}" matTooltip="{{'Groups'| transloco}}">
          <span class="material-icons">groups</span>
        </button>
      </div>

      <!--Search menu-->
      <div *ngIf="pageView === 'Search'" class="menu-buttons">

        <button mat-flat-button color="primary" *ngIf="allowSearch" type="submit" (click)="onSubmit()" attr.aria-label="{{'Search'| transloco}}" matTooltip="{{'Search'| transloco}}">
          <span class="material-icons">search</span>
        </button>

        <button mat-flat-button color="primary" *ngIf="allowSearch" (click)="reset()" attr.aria-label="{{'Reset'| transloco}}" matTooltip="{{'Reset'| transloco}}">
          <span class="material-icons">undo</span>
        </button>

        <button mat-flat-button color="primary" (click)="loadSearch()" attr.aria-label="{{'LoadSearchFilter'| transloco}}" matTooltip="{{'LoadSearchFilter'| transloco}}">
          <span class="material-icons">find_in_page</span>
        </button>

        <button mat-flat-button color="primary" *ngIf="allowSearch" (click)="saveSearch()" attr.aria-label="{{'SaveSearchFilter'| transloco}}" matTooltip="{{'SaveSearchFilter'| transloco}}">
          <span class="material-icons">save</span>
        </button>
      </div>

    </div>

    <!--Upper right corner menu-->
    <button mat-flat-button color="primary" [matMenuTriggerFor]="menu" class="menu" attr.aria-label="{{'Menu'| transloco}}" matTooltip="{{'Menu'| transloco}}">
      <span class="material-icons">menu</span>
    </button>
  </div>

  <mat-menu #menu="matMenu">
    <div *ngIf="isProfileCreated">
      <a (click)="loadEdit()" mat-menu-item>
        {{'EditProfile'| transloco}}
        <span class="material-icons">person</span>
      </a>
    </div>
    <a (click)="loadAbout()" mat-menu-item>
      {{'About'| transloco}}
      <span class="material-icons">plus_one</span>
    </a>
    <div *ngIf="currentUserSubject != null && !currentUserSubject?.admin">
      <a (click)="loadFeedback()" mat-menu-item>
        {{'Feedback'| transloco}}
        <span class="material-icons">plus_one</span>
      </a>
    </div>
    <div *ngIf="currentUserSubject != null && currentUserSubject?.admin">
      <a (click)="loadFeedbackAdmin()" mat-menu-item>
        {{'FeedbackAdmin'| transloco}}
        <span class="material-icons">admin_panel_settings</span>
      </a>
    </div>
    <div *ngIf="currentUserSubject != null && currentUserSubject?.admin">
      <a (click)="loadAdmin()" mat-menu-item>
        {{'Admin'| transloco}}
        <span class="material-icons">admin_panel_settings</span>
      </a>
    </div>

    <button mat-flat-button color="accent" *ngIf="auth.isAuthenticated()" (click)="logOut()" attr.aria-label="{{'LogOut'| transloco}}">
      {{'LogOut'| transloco}}
    </button>
  </mat-menu>


  <mat-sidenav-container class="sidenav-container" [style.marginTop.px]="mobileQuery.matches ? 0 : 0">
    <mat-sidenav #sidenav [fixedInViewport]="true" [fixedTopGap]="mobileQuery.matches ? 200 : 140">
      <div *ngIf="pageView === 'Search'">
        <app-profile-search (getProfileByFilter)="getData('ProfilesSearch')" (toggleDisplay)="toggleDisplay()" (activateSearch)="activateSearch($event)"></app-profile-search>
      </div>
    </mat-sidenav>

    <mat-sidenav-content>
      <div *ngIf="pageView === 'Search' || pageView === 'Dashboard'">
        <dashboard (isCurrentUserCreated)="isCurrentUserCreated($event)" (loadDetails)="loadDetails($event)"></dashboard>
      </div>

      <div *ngIf="pageView === 'About'">
        <about></about>
      </div>

      <div *ngIf="pageView === 'Feedback'">
        <feedback></feedback>
      </div>

      <div *ngIf="pageView === 'FeedbackAdmin'">
        <feedback-admin (loadProfileDetails)="loadDetails($event)"></feedback-admin>
      </div>

      <div *ngIf="pageView === 'Admin'">
        <admin></admin>
      </div>

      <div *ngIf="!isProfileCreated && pageView != 'About' && pageView != 'Feedback'">
        <create-profile (isCurrentUserCreated)="isCurrentUserCreated($event)"></create-profile>
      </div>

      <div *ngIf="isProfileCreated && pageView === 'Edit'">
        <currentUserBoard (loadDetails)="loadDetails($event)" [tabIndex]="CurrentUserBoardTabIndex"><edit-profile></edit-profile></currentUserBoard>
      </div>

      <div *ngIf="isProfileCreated && pageView === 'Details'">
        <!-- Tile and List should call details-page with Profile as input -->
        <profileDetailsBoard (loadDetails)="loadDetails($event)" [profile]="profile"></profileDetailsBoard>
      </div>

      <div *ngIf="pageView === 'Groups'">
        <groups-listview></groups-listview>
      </div>

    </mat-sidenav-content>
  </mat-sidenav-container>

  <!--chat-component-->
  <div *ngIf="useChat">
    <chatWrapper [currentUser]="currentUserSubject"></chatWrapper>
  </div>


</div>
