<div *ngIf="!auth.isAuthenticated()">
  <button id="qsLoginBtn"
          *ngIf="!auth.isAuthenticated()"
          (click)="auth.login()" type="button"
          mat-flat-button color="accent">
    Log In
  </button>

  <h3>
    {{'NotLoggedIn'| transloco}}
    {{ 'title' | transloco }}
  </h3>
</div>

<div *ngIf="auth.isAuthenticated()">

  <div id="navbar" [class.mobile]="mobileQuery.matches">
    <h2>{{ 'title' | transloco }}</h2>
    <h2>{{title}}</h2>

    <div *ngIf="isProfileCreated">
      <!--Navigation buttons-->
      <div *ngIf="pageView === 'Dashboard' || pageView === 'Search' || pageView === 'Details'" class="menu-buttons">
        <button type="button" (click)="sidenav.toggle(); toggleDisplay();" class="mat-app-flat-button" mat-flat-button color="primary" matTooltip={{matButtonToggleText}}>
          <i class="material-icons">{{matButtonToggleIcon}}</i>
        </button>
      </div>

      <!--ViewToggle button-->
      <div *ngIf="pageView === 'Dashboard' || pageView === 'Search'" class="menu-buttons">
        <button type="button" (click)="toggleViewDisplay()" class="mat-dashboard-flat-button" mat-flat-button color="primary" matTooltip={{matButtonViewToggleText}}>
          <i class="material-icons">{{matButtonViewToggleIcon}}</i>
        </button>
      </div>

      <!--Dashboard menu-->
      <div *ngIf="pageView === 'Dashboard'" class="menu-buttons">
        <button type="button" (click)="getLatestProfiles(); resetSelectionPagination();" class="mat-dashboard-flat-button" mat-flat-button color="primary" i18n-matTooltip="All | All @@all" matTooltip="All">
          All
        </button>

        <button type="button" (click)="getProfileByCurrentUsersFilter(); resetSelectionPagination();" class="mat-dashboard-flat-button" mat-flat-button color="primary" i18n-matTooltip="My Search Filter | My Search Filter @@mySearchFilter" matTooltip="My Search Filter">
          <i class="material-icons">tune</i>
        </button>

        <button type="button" (click)="getBookmarkedProfiles(); resetSelectionPagination();" class="mat-dashboard-flat-button" mat-flat-button color="primary" i18n-matTooltip="Bookmarks | Bookmarks @@bookmarks" matTooltip="Bookmarks">
          <i class="material-icons">bookmarks</i>
        </button>

        <button type="button" (click)="getProfilesWhoVisitedMe(); resetSelectionPagination();" class="mat-dashboard-flat-button" mat-flat-button color="primary" i18n-matTooltip="Visited Me | Visited Me @@visitedMe" matTooltip="Visited me">
          <i class="material-icons">adjust</i>
        </button>

        <button type="button" (click)="getProfilesWhoBookmarkedMe(); resetSelectionPagination();" class="mat-dashboard-flat-button" mat-flat-button color="primary" i18n-matTooltip="Bookmarked Me | Bookmarked Me @@bookmarkedMe" matTooltip="Bookmarked me">
          <i class="material-icons">bookmark_added</i>
        </button>

        <button type="button" (click)="getProfilesWhoLikesMe(); resetSelectionPagination();" class="mat-dashboard-flat-button" mat-flat-button color="primary" i18n-matTooltip="Likes Me | Likes Me @@LikesMe" matTooltip="Likes me">
          <i class="material-icons">favorite</i>
        </button>

        <!--<button type="button" (click)="toggleFilterView()" class="mat-dashboard-flat-button" mat-flat-button color="primary" matTooltip={{matButtonFilterViewText}}>
        <i class="material-icons">{{matButtonFilterViewIcon}}</i>
      </button>-->
      </div>

      <!--Search menu-->
      <div *ngIf="pageView === 'Search'" class="menu-buttons">
        <!--[disabled]="profileForm.pristine"-->
        <button type="submit" (click)="onSubmit()"
                class="mat-search-flat-button" mat-flat-button color="primary" i18n-matTooltip="Search | Search @@search" matTooltip="Search">
          <i class="material-icons">search</i>
        </button>

        <!--[disabled]="profileForm.pristine"-->
        <button type="button" (click)="revert()"
                class="mat-search-flat-button" mat-flat-button color="primary" i18n-matTooltip="Revert | Revert @@revert" matTooltip="Revert">
          <i class="material-icons">undo</i>
        </button>

        <!--[disabled]="profileForm.pristine"-->
        <button type="button" (click)="saveSearch()"
                class="mat-search-flat-button" mat-flat-button color="primary" i18n-matTooltip="Save Search Filter | Save Search Filter @@saveSearchFilter" matTooltip="Save Search Filter">
          <i class="material-icons">save</i>
        </button>

        <button type="button" (click)="loadSearch()" class="mat-search-flat-button" mat-flat-button color="primary" i18n-matTooltip="Load Search Filter | Load Search Filter @@loadSearchFilter" matTooltip="Load Search Filter">
          <i class="material-icons">find_in_page</i>
        </button>
      </div>

      <!--OrderBy button-->
      <div *ngIf="pageView === 'Search' || pageView === 'Dashboard'" class="menu-buttons">
        <button type="button" (click)="toggleOrderBy()" class="mat-app-flat-button" mat-flat-button color="primary" matTooltip={{matButtonOrderByText}}>
          <i class="material-icons">{{matButtonOrderByIcon}}</i>
        </button>
      </div>

    </div>

    <!--Upper right corner menu-->
    <button type="button" [matMenuTriggerFor]="menu" class="menu" mat-flat-button color="accent">
      <span class="material-icons" i18n="Menu | Menu @@menu">
        menu
      </span>
    </button>
  </div>

  <mat-menu #menu="matMenu">

    <mat-select i18n-placeholder="Profile Language | A Language for the Profile @@profileLanguage" placeholder="Language" [(value)]="siteLocale" (selectionChange)="switchLanguage()" class="language">
      <mat-option *ngFor="let lang of languageList" [value]="lang.code">
        {{ lang.label }}<span class="flag-icon flag-icon-{{lang.alpha2}}"></span>
      </mat-option>
    </mat-select>

    <div *ngIf="isProfileCreated">
      <a (click)="loadEdit()" mat-menu-item i18n="Profile Edit | Edit the Profile @@profileEdit">
        Edit Profile
        <i class="material-icons">person</i>
      </a>
    </div>
    <a (click)="loadAbout()" mat-menu-item i18n="AboutUs | AboutPage @@about">
      About
      <i class="material-icons">plus_one</i>
    </a>

    <button id="qsLogoutBtn"
            class="mat-menu-flat-button"
            *ngIf="auth.isAuthenticated()"
            (click)="auth.logout()" type="button"
            mat-flat-button color="accent">
      Log Out
    </button>
  </mat-menu>


  <mat-sidenav-container class="sidenav-container" [style.marginTop.px]="mobileQuery.matches ? 0 : 0">
    <mat-sidenav #sidenav [fixedInViewport]="true" [fixedTopGap]="mobileQuery.matches ? 200 : 140">
      <div *ngIf="pageView === 'Search'">
        <app-profile-search (getProfileByFilter)="getProfileByFilter($event, false)"></app-profile-search>
      </div>
    </mat-sidenav>

    <mat-sidenav-content>
      <div *ngIf="pageView === 'Search' || pageView === 'Dashboard'">
        <dashboard (isCurrentUserCreated)="isCurrentUserCreated($event)" (loadDetails)="loadDetails($event)"></dashboard>
      </div>

      <div *ngIf="pageView === 'About'">
        <about></about>
      </div>

      <div *ngIf="!isProfileCreated && pageView != 'About'">
        <create-profile (isCurrentUserCreated)="isCurrentUserCreated($event)" (initDefaultData)="initDefaultData()"></create-profile>
      </div>

      <div *ngIf="isProfileCreated && pageView === 'Edit'">
        <currentUserBoard (loadDetails)="loadDetails($event)"><edit-profile></edit-profile></currentUserBoard>
      </div>

      <div *ngIf="isProfileCreated && pageView === 'Details'">
        <!-- Tile and List should call details-page with Profile as input -->
        <profileDetailsBoard [profile]="profile"><profile-details></profile-details></profileDetailsBoard>
      </div>
    </mat-sidenav-content>
  </mat-sidenav-container>

  <!--chat-component-->
  <div *ngIf="useChat">
    <chat-component [currentUser]="currentUserSubject"></chat-component>
  </div>


</div>
