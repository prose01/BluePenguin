<div class="grid grid-pad">

  <div class="spinner-overlay" *ngIf="loading">
    <div class="spinner-container">
      <mat-spinner class="custom-spinner"></mat-spinner>
    </div>
  </div>

  <div *ngIf="currentUserSubject">
    <h4>{{'UpdateDetails'| transloco}}</h4>

    <form [formGroup]="profileForm">

      <div style="margin-bottom: 1em">
        <button mat-flat-button color="accent" (click)="onSubmit()" [disabled]="profileForm.pristine" attr.aria-label="{{'Save'| transloco}}" matTooltip="{{'Save'| transloco}}">
          <span class="material-icons icon-white-square">save</span>
        </button>
        <button mat-flat-button color="accent" (click)="revert()" [disabled]="profileForm.pristine" attr.aria-label="{{'Reset'| transloco}}" matTooltip="{{'Reset'| transloco}}">
          <span class="material-icons icon-white-square">undo</span>
        </button>
      </div>

      <div class="form-container">

        <mat-form-field>
          <mat-label>{{'Language'| transloco}}</mat-label>
          <mat-select formControlName="languagecode" [(value)]="siteLocale" (selectionChange)="switchLanguage()">
            <mat-option *ngFor="let lang of languageList" [value]="lang.code">
              {{ lang.label }}<span class="flag-icon flag-icon-{{lang.alpha2}}"></span>
            </mat-option>
          </mat-select>
        </mat-form-field>

        <mat-form-field>
          <mat-label>{{'Country'| transloco}}</mat-label>
          <mat-select formControlName="countrycode" [(value)]="countrycode" (selectionChange)="switchCountry()">
            <mat-option *ngFor="let country of countryList" [value]="country.code">
              {{ country.label }}<span class="flag-icon flag-icon-{{country.code}}"></span>
            </mat-option>
          </mat-select>
        </mat-form-field>

        <mat-form-field class="tag-list">
          <mat-label>{{tagsPlaceholder}}</mat-label>
          <mat-chip-grid #chipList formControlName="tags">
            <mat-chip-row *ngFor="let tag of tagsList" [selectable]="selectable"
                          [removable]="removable" (removed)="remove(tag)">
              {{tag}}
              <i class="material-icons" matChipRemove *ngIf="removable">cancel</i>
            </mat-chip-row>
            <input matInput
                   [matChipInputFor]="chipList"
                   [matChipInputSeparatorKeyCodes]="separatorKeysCodes"
                   [matChipInputAddOnBlur]="addOnBlur"
                   (matChipInputTokenEnd)="add($event)">
          </mat-chip-grid>
        </mat-form-field>

        <mat-form-field>
          <mat-label>{{'Name'| transloco}}</mat-label>
          <input matInput tabindex="-1" formControlName="name" [readonly]="true">
        </mat-form-field>

        <mat-form-field>
          <mat-label>{{'Description'| transloco}}</mat-label>
          <textarea matInput maxlength="2000" formControlName="description" class="textarea"></textarea>
        </mat-form-field>

        <mat-form-field>
          <mat-label>{{'CreatedOn'| transloco}}</mat-label>
          <input matInput tabindex="-1" formControlName="createdOn" [readonly]="true">
        </mat-form-field>

        <mat-form-field>
          <mat-label>{{'UpdatedOn'| transloco}}</mat-label>
          <input matInput tabindex="-1" formControlName="updatedOn" [readonly]="true">
        </mat-form-field>

        <mat-form-field>
          <mat-label>{{'LastActive'| transloco}}</mat-label>
          <input matInput tabindex="-1" formControlName="lastActive" [readonly]="true">
        </mat-form-field>

        <mat-label>{{'Age'| transloco}}</mat-label>
        <mat-slider min={{minAge}} max={{maxAge}} step="1" discrete>
          <input thumbLabel formControlName="age" matSliderThumb [value]="age" />
        </mat-slider>

        <mat-label>{{'Height'| transloco}}</mat-label>
        <mat-slider min={{minHeight}} max={{maxHeight}} step="1" discrete>
          <input thumbLabel formControlName="height" matSliderThumb [value]="height" />
        </mat-slider>

        <mat-form-field>
          <mat-label>{{'Gender'| transloco}}</mat-label>
          <mat-select formControlName="gender">
            <mat-option *ngFor="let genderType of genderTypes | keyvalue: originalOrder" [value]="genderType.key">
              {{ genderType.value }}
            </mat-option>
          </mat-select>
        </mat-form-field>

        <mat-form-field>
          <mat-label>{{'Seeking'| transloco}}</mat-label>
          <mat-select formControlName="seeking" multiple>
            <mat-option *ngFor="let genderType of genderTypes | keyvalue: originalOrder" [value]="genderType.key">
              {{ genderType.value }}
            </mat-option>
          </mat-select>
        </mat-form-field>

        <mat-form-field>
          <mat-label>{{'BodyType'| transloco}}</mat-label>
          <mat-select formControlName="body">
            <mat-option *ngFor="let bodyType of bodyTypes | keyvalue: originalOrder" [value]="bodyType.key">
              {{ bodyType.value }}
            </mat-option>
          </mat-select>
        </mat-form-field>

        <mat-form-field>
          <mat-label>{{'SmokingHabitsType'| transloco}}</mat-label>
          <mat-select formControlName="smokingHabits">
            <mat-option *ngFor="let smokingHabitsType of smokingHabitsTypes | keyvalue: originalOrder" [value]="smokingHabitsType.key">
              {{ smokingHabitsType.value }}
            </mat-option>
          </mat-select>
        </mat-form-field>

        <mat-form-field>
          <mat-label>{{'HasChildrenType'| transloco}}</mat-label>
          <mat-select formControlName="hasChildren">
            <mat-option *ngFor="let hasChildrenType of hasChildrenTypes | keyvalue: originalOrder" [value]="hasChildrenType.key">
              {{ hasChildrenType.value }}
            </mat-option>
          </mat-select>
        </mat-form-field>

        <mat-form-field>
          <mat-label>{{'WantChildrenType'| transloco}}</mat-label>
          <mat-select formControlName="wantChildren">
            <mat-option *ngFor="let wantChildrenType of wantChildrenTypes | keyvalue: originalOrder" [value]="wantChildrenType.key">
              {{ wantChildrenType.value }}
            </mat-option>
          </mat-select>
        </mat-form-field>

        <mat-form-field>
          <mat-label>{{'HasPetsType'| transloco}}</mat-label>
          <mat-select formControlName="hasPets">
            <mat-option *ngFor="let hasPetsType of hasPetsTypes | keyvalue: originalOrder" [value]="hasPetsType.key">
              {{ hasPetsType.value }}
            </mat-option>
          </mat-select>
        </mat-form-field>

        <mat-form-field>
          <mat-label>{{'LivesInType'| transloco}}</mat-label>
          <mat-select formControlName="livesIn">
            <mat-option *ngFor="let livesInType of livesInTypes | keyvalue: originalOrder" [value]="livesInType.key">
              {{ livesInType.value }}
            </mat-option>
          </mat-select>
        </mat-form-field>

        <mat-form-field>
          <mat-label>{{'EducationType'| transloco}}</mat-label>
          <mat-select formControlName="education">
            <mat-option *ngFor="let educationType of educationTypes | keyvalue: originalOrder" [value]="educationType.key">
              {{ educationType.value }}
            </mat-option>
          </mat-select>
        </mat-form-field>

        <mat-form-field>
          <mat-label>{{'EducationStatusType'| transloco}}</mat-label>
          <mat-select formControlName="educationStatus">
            <mat-option *ngFor="let educationStatusType of educationStatusTypes | keyvalue: originalOrder" [value]="educationStatusType.key">
              {{ educationStatusType.value }}
            </mat-option>
          </mat-select>
        </mat-form-field>

        <mat-form-field>
          <mat-label>{{'EmploymentStatusType'| transloco}}</mat-label>
          <mat-select formControlName="employmentStatus">
            <mat-option *ngFor="let employmentStatusType of employmentStatusTypes | keyvalue: originalOrder" [value]="employmentStatusType.key">
              {{ employmentStatusType.value }}
            </mat-option>
          </mat-select>
        </mat-form-field>

        <mat-form-field>
          <mat-label>{{'SportsActivityType'| transloco}}</mat-label>
          <mat-select formControlName="sportsActivity">
            <mat-option *ngFor="let sportsActivityType of sportsActivityTypes | keyvalue: originalOrder" [value]="sportsActivityType.key">
              {{ sportsActivityType.value }}
            </mat-option>
          </mat-select>
        </mat-form-field>

        <mat-form-field>
          <mat-label>{{'EatingHabitsType'| transloco}}</mat-label>
          <mat-select formControlName="eatingHabits">
            <mat-option *ngFor="let eatingHabitsType of eatingHabitsTypes | keyvalue: originalOrder" [value]="eatingHabitsType.key">
              {{ eatingHabitsType.value }}
            </mat-option>
          </mat-select>
        </mat-form-field>

        <mat-form-field>
          <mat-label>{{'ClotheStyleType'| transloco}}</mat-label>
          <mat-select formControlName="clotheStyle">
            <mat-option *ngFor="let clotheStyleType of clotheStyleTypes | keyvalue: originalOrder" [value]="clotheStyleType.key">
              {{ clotheStyleType.value }}
            </mat-option>
          </mat-select>
        </mat-form-field>

        <mat-form-field>
          <mat-label>{{'BodyArtType'| transloco}}</mat-label>
          <mat-select formControlName="bodyArt">
            <mat-option *ngFor="let bodyArtType of bodyArtTypes | keyvalue: originalOrder" [value]="bodyArtType.key">
              {{ bodyArtType.value }}
            </mat-option>
          </mat-select>
        </mat-form-field>

        <mat-form-field>
          <mat-label>{{'AvatarInitials'| transloco}}</mat-label>
          <input matInput maxlength="2" formControlName="avatarInitials">
        </mat-form-field>

        <mat-label>{{'AvatarInitialsColour'| transloco}}</mat-label>
        <button mat-flat-button color="primary" (click)="selectAvatarColours('initialsColour');" matTooltip="{{'AvatarInitialsColour'| transloco}}">
          <span class="material-icons" style="color:{{ avatarInitialsColour }}">palette</span>
        </button>

        <mat-label>{{'AvatarColour'| transloco}}</mat-label>
        <button mat-flat-button color="primary" (click)="selectAvatarColours('circleColour');" matTooltip="{{'AvatarColour'| transloco}}">
          <span class="material-icons" style="color:{{ avatarColour }}">palette</span>
        </button>

        <mat-slide-toggle [(ngModel)]="isChecked" [checked]="contactable" matTooltip="{{'ContactableText'| transloco}}" placeholder="{{'Contactable'| transloco}}" formControlName="contactable">{{'Contactable'| transloco}}</mat-slide-toggle>

      </div>

    </form>

    <hr class="solid">

    <button *ngIf="!currentUserSubject.admin" mat-flat-button color="accent" (click)="openDeleteCurrentUserDialog()" attr.aria-label="{{'DeleteProfile'| transloco}}" matTooltip="{{'DeleteProfile'| transloco}}">
      <span class="material-icons icon-white-square">delete</span>
    </button>

  </div>

</div>
